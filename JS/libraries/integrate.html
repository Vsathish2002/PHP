
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Interactive Date, Table & Chart</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    #chart { width: 100%; height: 400px; margin-top: 30px; }
  </style>
</head>
<body>

<h2>Select Date</h2>
<input type="text" id="datepicker" placeholder="Select a date">

<h2>Sales Data Table</h2>
<table id="example" class="display" style="width:100%">
  <thead>
    <tr><th>Name</th><th>Age</th><th>Country</th><th>Sales</th><th>Date</th></tr>
  </thead>
  <tbody>
    <tr><td>Sathish</td><td>25</td><td>India</td><td>500</td><td>2025-09-01</td></tr>
    <tr><td>John</td><td>30</td><td>UK</td><td>700</td><td>2025-09-02</td></tr>
    <tr><td>Rock</td><td>48</td><td>USA</td><td>800</td><td>2025-09-03</td></tr>
    <tr><td>Rahul</td><td>24</td><td>India</td><td>600</td><td>2025-09-01</td></tr>
    <tr><td>Sara</td><td>28</td><td>UK</td><td>900</td><td>2025-09-03</td></tr>
  </tbody>
</table>

<h2>Sales Chart</h2>
<div id="chart"></div>

<!-- JS Libraries -->
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>

<script>

  flatpickr("#datepicker", { dateFormat: "Y-m-d" });

 
  var table = $('#example').DataTable();

 
  var chartDom = document.getElementById('chart');
  var myChart = echarts.init(chartDom);


  var allData = table.rows().data().toArray().map(row => ({
    Name: row[0],
    Age: row[1],
    Country: row[2],
    Sales: +row[3],
    Date: row[4]
  }));

  function updateChart(filteredData) {
    var names = filteredData.map(d => d.Name);
    var sales = filteredData.map(d => d.Sales);
    var option = {
      title: { text: 'Sales Data Chart' },
      tooltip: {},
      legend: { data:['Sales'] },
      xAxis: { data: names },
      yAxis: {},
      series: [{ name: 'Sales', type: 'bar', data: sales }]
    };
    myChart.setOption(option);
  }

  updateChart(allData);

  $("#datepicker").on("change", function() {
    var selectedDate = this.value;
    var filtered = allData.filter(d => selectedDate === "" || d.Date === selectedDate);

    table.rows().every(function() {
      var rowDate = this.data()[4];
      this.node().style.display = (selectedDate === "" || rowDate === selectedDate) ? "" : "none";
    });
    table.draw(false);
    
    updateChart(filtered);
  });
</script>

</body>
</html>
